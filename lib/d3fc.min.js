!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-array"),require("d3-scale"),require("d3-time"),require("d3-random"),require("d3-request"),require("d3-path"),require("d3-selection"),require("d3-shape"),require("d3-dispatch"),require("d3-brush")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-scale","d3-time","d3-random","d3-request","d3-path","d3-selection","d3-shape","d3-dispatch","d3-brush"],n):n(t.fc=t.fc||{},t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3)}(this,function(t,n,e,r,i,o,u,a,c,l,f){"use strict";function h(t){return t}function s(t){}function d(t){return"function"==typeof t?t:function(){return t}}function g(t){return"number"==typeof t&&isNaN(t)?void 0:t}function v(t,n,e){var r=t.map(function(t){return[n(t),t]}),i=function(t){return t instanceof Date?t.getTime():t};return r.reduce(function(t,n){return 0===t.filter(function(t){return i(t[0])===i(n[0])}).length&&t.push(n),t},[]).map(function(t){return t[1]})}function p(t){var n=this;arguments.length||(t=e.scaleIdentity());var r=X(),i=function(n){var e=t.domain(),i=t.range(),o=r.distance(e[0],e[1]);return r.distance(e[0],n)/o*(i[1]-i[0])+i[0]};return i.invert=function(n){var e=t.domain(),i=t.range(),o=(n-i[0])/(i[1]-i[0]),u=r.distance(e[0],e[1]),a=o*u;return r.offset(e[0],a)},i.domain=function(){if(!arguments.length)return t.domain();var n=arguments.length<=0?void 0:arguments[0],e=r.clampUp(n[0]),o=r.clampDown(n[1]);return t.domain([e,o]),i},i.nice=function(){t.nice();var n=t.domain(),e=r.clampUp(n[0]),o=r.clampDown(n[1]);return t.domain([e,o]),i},i.ticks=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return v(t.ticks.apply(n,r),i,i.domain())},i.copy=function(){return p(t.copy()).discontinuityProvider(r.copy())},i.discontinuityProvider=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},S(i,t,L("range","rangeRound","interpolate","clamp","tickFormat")),i}function m(t){return"function"==typeof t?t:function(){return t}}function y(){var t=arguments;return function(n,e){for(var r=0,i=t.length;r<i;r++)if(null==t[r](n,e))return!1;return!0}}function b(){var t=arguments;return function(n,e){for(var r=0,i=t.length;r<i;r++)if(null==t[r](n,e))return!1;return!0}}function w(){var t=arguments;return function(n,e){for(var r=0,i=t.length;r<i;r++)if(null==t[r](n,e))return!1;return!0}}var x=function(t,n,e){var r=n[e];if("function"!=typeof r)throw new Error("Attempt to rebind "+e+" which isn't a function on the source object");return function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var u=r.apply(n,i);return u===n?t:u}},T=function(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];var o=!0,u=!1,a=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;t[f]=x(t,n,f)}}catch(t){u=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(u)throw a}}return t},k=function(t){return function(n){return t.reduce(function(t,n){return t&&n(t)},n)}},S=function(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];var o=k(r),u=!0,a=!1,c=void 0;try{for(var l,f=Object.keys(n)[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var h=l.value,s=o(h);s&&(t[s]=x(t,n,h))}}catch(t){a=!0,c=t}finally{try{!u&&f.return&&f.return()}finally{if(a)throw c}}return t},E=function(t){return t.map(function(t){return"string"==typeof t?new RegExp("^"+t+"$"):t})},M=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return n=E(n),function(t){return n.every(function(n){return!n.test(t)})&&t}},L=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return n=E(n),function(t){return n.some(function(n){return n.test(t)})&&t}},A=function(t){return function(n){return t[n]}},H=function(t){return t[0].toUpperCase()+t.slice(1)},O=function(t){return function(n){return t+H(n)}},_=function(){var t=function(){return 10},n=s,e=h,r=function(t){return null!=t},i=function(i){var o=t.apply(this,arguments),u=i.slice(0,o).map(e);return i.map(function(t,i){return i>=o&&(u.shift(),u.push(e(t,i))),i<o-1||u.some(function(t){return!r(t)})?n(void 0,i):n(u,i)})};return i.period=function(){return arguments.length?(t=d(arguments.length<=0?void 0:arguments[0]),i):t},i.accumulator=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.defined=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.value=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i},C=function(){var t=2,e=_().accumulator(function(e){var r=e&&n.deviation(e),i=e&&n.mean(e);return{average:i,upper:g(i+t*r),lower:g(i-t*r)}}),r=function(t){return e(t)};return r.multiplier=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},T(r,e,"period","value"),r},D=function(){var t=h,e=function(){return 9},r=function(t){var e=[];return function(r){var i=void 0;return e.length<t&&(null!=r?e.push(r):e=[]),e.length>=t&&(i=n.mean(e)),i}},i=function(n){var i=e.apply(this,arguments),o=2/(i+1),u=r(i),a=void 0;return n.map(function(n,e){var r=t(n,e);return a=void 0===a?u(r):r*o+(1-o)*a,g(a)})};return i.period=function(){return arguments.length?(e=d(arguments.length<=0?void 0:arguments[0]),i):e},i.value=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i},I=function(){var t=h,e=D().period(12),r=D().period(26),i=D().period(9),o=function(o){e.value(t),r.value(t);var u=n.zip(e(o),r(o)).map(function(t){return void 0!==t[0]&&void 0!==t[1]?t[0]-t[1]:void 0}),a=i(u);return n.zip(u,a).map(function(t){return{macd:t[0],signal:t[1],divergence:void 0!==t[0]&&void 0!==t[1]?t[0]-t[1]:void 0}})};return o.value=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},S(o,e,A({period:"fastPeriod"})),S(o,r,A({period:"slowPeriod"})),S(o,i,A({period:"signalPeriod"})),o},z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},N=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),P=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},F=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},R=function(){function t(t,n){var e=[],r=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),U=function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)},q=function(){var t=_().period(14),e=function(t,n){return n+(t[t.length-1]-n)/t.length},r=function(t){var n=R(t,2),e=n[0],r=n[1];return e<r?0:e-r},i=function(t){var n=R(t,2),e=n[0],r=n[1];return e>r?0:r-e},o=function(t,r){return void 0!==r?e(t,r):n.mean(t)},u=function(){var t=void 0,e=void 0,u=void 0;return function(a){if(!a)return void(void 0!==t&&(t=NaN));if(void 0===t)return void(t=a[0]);var c=n.pairs([t].concat(U(a)));return e=o(c.map(r),e),u=o(c.map(i),u),g(100-100/(1+(isNaN(t)?NaN:u/e)))}},a=function(n){var e=u();return t.accumulator(e),t(n)};return T(a,t,"period","value"),a},B=function(){var t=_().accumulator(function(t){return t&&n.mean(t)}),e=function(n){return t(n)};return T(e,t,"period","value"),e},j=function(){var t=function(t,n){return t.close},e=function(t,n){return t.high},r=function(t,n){return t.low},i=_().period(5).defined(function(n){return null!=t(n)&&null!=e(n)&&null!=r(n)}).accumulator(function(i){var o=i&&n.max(i,e),u=i&&n.min(i,r);return g(i&&100*(t(i[i.length-1])-u)/(o-u))}),o=B().period(3),u=function(t){var n=i(t),e=o(n);return n.map(function(t,n){return{k:t,d:e[n]}})};return u.closeValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.highValue=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.lowValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],u):r},S(u,i,A({period:"kPeriod"})),S(u,o,A({period:"dPeriod"})),u},Q=function(){var t=function(t,n){return t.volume},n=function(t,n){return t.close},e=D().period(13),r=_().period(2).defined(function(e){return null!=n(e)&&null!=t(e)}).accumulator(function(e){return e&&g((n(e[1])-n(e[0]))*t(e[1]))}),i=function(t){var n=r(t);return e(n)};return i.volumeValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.closeValue=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},T(i,e,"period"),i},G=function(){var t=.1,n=h,e=function(e){return e.map(function(e){return{lower:g(n(e)*(1-t)),upper:g(n(e)*(1+t))}})};return e.factor=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],e):t},e.value=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],e):n},e},Y=function(){var t=function(t,n){return t.close},e=function(t,n){return t.high},r=function(t,n){return t.low},i=D().period(13),o=function(o){return i.value(t),n.zip(o,i(o)).map(function(t){return{bullPower:g(e(t[0])-t[1]),bearPower:g(r(t[0])-t[1])}})};return o.closeValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.highValue=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.lowValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},T(o,i,"period"),o},X=function(){var t={};return t.distance=function(t,n){return n-t},t.offset=function(t,n){return t instanceof Date?new Date(t.getTime()+n):t+n},t.clampUp=function(t){return t},t.clampDown=function(t){return t},t.copy=function(){return t},t},W=function(){var t={sunday:0,monday:1,saturday:6},n={},e=function(t){return 0===t.getDay()||6===t.getDay()};return n.clampDown=function(n){if(n&&e(n)){var i=r.timeDay.ceil(n);return i.getDay()===t.sunday?r.timeDay.offset(i,-1):i.getDay()===t.monday?r.timeDay.offset(i,-2):i}return n},n.clampUp=function(n){if(n&&e(n)){var i=r.timeDay.floor(n);return i.getDay()===t.saturday?r.timeDay.offset(i,2):i.getDay()===t.sunday?r.timeDay.offset(i,1):i}return n},n.distance=function(t,e){t=n.clampUp(t),e=n.clampDown(e);var i=r.timeSaturday.ceil(t);if(e<i)return e.getTime()-t.getTime();var o=i.getTime()-t.getTime(),u=r.timeSaturday.ceil(e),a=u.getTime()-e.getTime();return 432e6*Math.round((u.getTime()-i.getTime())/6048e5)+o-a},n.offset=function(t,i){var o=e(t)?n.clampUp(t):t;if(0===i)return o;var u=i<0,a=i>0,c=i,l=u?r.timeMonday.floor(o):r.timeSaturday.ceil(o);if(c-=l.getTime()-o.getTime(),u&&c>0||a&&c<0)return new Date(o.getTime()+i);o=u?l:r.timeDay.offset(l,2);var f=Math.floor(c/432e6);return o=r.timeDay.offset(o,7*f),c-=432e6*f,o=new Date(o.getTime()+c)},n.copy=function(){return n},n},Z=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=function(t,n){return t>n[0]&&t<n[1]},i=function(t,n){return t[0]>=n[0]&&t[1]<=n[1]},o={};o.distance=function(t,e){t=o.clampUp(t),e=o.clampDown(e);var r=n.filter(function(n){return i(n,[t,e])}),u=r.map(function(t){return t[1]-t[0]});return e-t-u.reduce(function(t,n){return t+n},0)};var u=function(t,n){return t instanceof Date?new Date(t.getTime()+n):t+n};return o.offset=function(t,e){if(e>0){var r=function(){for(var r=o.clampUp(t),i=e;i>0;){var a=n.filter(function(t){return t[0]>r}).sort(function(t,n){return t[0]-n[0]});if(a.length){var c=a[0],l=c[0]-r;l>i?(r=u(r,i),i=0):(r=c[1],i-=l)}else r=u(r,i),i=0}return{v:r}}();if("object"===(void 0===r?"undefined":z(r)))return r.v}else{var i=function(){for(var r=o.clampDown(t),i=e;i<0;){var a=n.filter(function(t){return t[1]<r}).sort(function(t,n){return n[0]-t[0]});if(a.length){var c=a[0],l=c[1]-r;l<i?(r=u(r,i),i=0):(r=c[0],i-=l)}else r=u(r,i),i=0}return{v:r}}();if("object"===(void 0===i?"undefined":z(i)))return i.v}},o.clampUp=function(t){return n.reduce(function(t,n){return r(t,n)?n[1]:t},t)},o.clampDown=function(t){return n.reduce(function(t,n){return r(t,n)?n[0]:t},t)},o.copy=function(){return o},o},K=function(){var t=[function(t){return t}],e=[0,0],r="percent",i=null,o=[],u=function(u){var a=new Array(u.length),c=!0,l=!1,f=void 0;try{for(var h,s=t[Symbol.iterator]();!(c=(h=s.next()).done);c=!0)for(var d=h.value,g=0;g<u.length;g++){var v=d(u[g],g);Array.isArray(v)?a.push.apply(a,U(v)):a.push(v)}}catch(t){l=!0,f=t}finally{try{!c&&s.return&&s.return()}finally{if(l)throw f}}var p=[n.min(a),n.max(a)];if(p[0]=null==p[0]?n.min(o):n.min([p[0]].concat(U(o))),p[1]=null==p[1]?n.max(o):n.max([p[1]].concat(U(o))),null!=i){var m=Math.max(Math.abs(p[1]-i),Math.abs(p[0]-i));p[0]=i-m,p[1]=i+m}switch(r){case"domain":p[0]-=e[0],p[1]+=e[1];break;case"percent":var y=p[1]-p[0];p[0]-=e[0]*y,p[1]+=e[1]*y;break;default:throw new Error("Unknown padUnit: "+r)}return p};return u.accessors=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.pad=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.padUnit=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],u):r},u.include=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],u):o},u.symmetricalAbout=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],u):i},u},$=function(){var t=[],n=[0,0],e="percent",r=null,i=[],o=K(),u=function(u){var a=t.map(function(t){return function(){var n=t.apply(void 0,arguments);return Array.isArray(n)?n.map(function(t){return t.valueOf()}):n.valueOf()}});return o.accessors(a).pad(n).padUnit(e).symmetricalAbout(null!=r?r.valueOf():null).include(i.map(function(t){return t.valueOf()})),o(u).map(function(t){return new Date(t)})};return u.accessors=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.pad=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},u.padUnit=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.include=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],u):i},u.symmetricalAbout=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],u):r},u},J=function(){var t=1,n=20,e=.1,r=.1,o=i.randomNormal(),u=function(i){for(var u=t/n,a=[],c=0;c<n+1;c++){a.push(i);var l=o()*Math.sqrt(u)*r+(e-r*r/2)*u;i*=Math.exp(l)}return a};return u.period=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.steps=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},u.mu=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.sigma=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],u):r},u.randomNormal=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],u):o},u},tt=function(){var t=new Date,n=100,e=r.timeDay,o=1,u=r.timeYear,a=1,c=null,l=function(){var t=i.randomNormal(1,.1);return Math.ceil(1e3*t())},f=J(),h=function(t){var n=u.offset(t,a)-t;return(e.offset(t,o)-t)/n},s=function(t,n){var e=h(t),r=f.period(e)(n),i={date:t,open:r[0],high:Math.max.apply(Math,r),low:Math.min.apply(Math,r),close:r[f.steps()]};return i.volume=l(i),i},d=function(r){var i=void 0,u=void 0,a=void 0;do{i=r?e.offset(r.date,o):new Date(t.getTime()),u=r?r.close:n,r=s(i,u),a=c&&!c(r)}while(a);return r},g=function(){var t=void 0,n={};return n.next=function(){var n=d(t);return t=n,n},n.take=function(t){return n.until(function(n,e){return!t||t<0||e===t})},n.until=function(n){for(var e=[],r=0,i=d(t),o=n&&!n(i,r);o;)e.push(i),t=i,i=d(t),r+=1,o=n&&!n(i,r);return e},n},v=function(t){return g().take(t)};return v.stream=g,v[Symbol.iterator]=function(){var t=g();return{next:function(){return{value:t.next(),done:!1}}}},v.startDate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],v):t},v.startPrice=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],v):n},v.interval=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],v):e},v.intervalStep=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],v):o},v.unitInterval=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v):u},v.unitIntervalStep=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],v):a},v.filter=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],v):c},v.volume=function(){return arguments.length?(l=m(arguments.length<=0?void 0:arguments[0]),v):l},T(v,f,"steps","mu","sigma"),v},nt=function(t){var n=t.date.getDay();return!(0===n||6===n)},et=function(){var t="BTC-USD",n=null,e=null,r=null,i=function(i){var u=[];null!=n&&u.push("start="+n.toISOString()),null!=e&&u.push("end="+e.toISOString()),null!=r&&u.push("granularity="+r);var a="https://api.gdax.com/products/"+t+"/candles?"+u.join("&");o.json(a,function(t,n){if(t)return void i(t);n=n.map(function(t){return{date:new Date(1e3*t[0]),open:t[3],high:t[2],low:t[1],close:t[4],volume:t[5]}}),i(t,n)})};return i.product=function(n){return arguments.length?(t=n,i):t},i.start=function(t){return arguments.length?(n=t,i):n},i.end=function(t){return arguments.length?(e=t,i):e},i.granularity=function(t){return arguments.length?(r=t,i):r},i},rt=function(){function t(t){return t[0].toLowerCase()+t.substr(1)}var n="YAHOO",e="GOOG",r=null,i=null,u=null,a=null,c=!1,l=null,f=t,h=function(t){var h=[];null!=r&&h.push("api_key="+r),null!=i&&h.push("start_date="+i.toISOString().substring(0,10)),null!=u&&h.push("end_date="+u.toISOString().substring(0,10)),null!=a&&h.push("rows="+a),c||h.push("order=asc"),null!=l&&h.push("collapse="+l);var s="https://www.quandl.com/api/v3/datasets/"+n+"/"+e+"/data.json?"+h.join("&");o.json(s,function(n,e){if(n)return void t(n);var r=e.dataset_data,i=f||function(t){return t},o=r.column_names.map(function(t,n){return[n,i(t)]}).filter(function(t){return t[1]}),u=r.data.map(function(t){var n={};return o.forEach(function(e){n[e[1]]=0===e[0]?new Date(t[e[0]]):t[e[0]]}),n});t(n,u)})};return h.database=function(t){return arguments.length?(n=t,h):n},h.dataset=function(t){return arguments.length?(e=t,h):e},h.apiKey=function(t){return arguments.length?(r=t,h):r},h.start=function(t){return arguments.length?(i=t,h):i},h.end=function(t){return arguments.length?(u=t,h):u},h.rows=function(t){return arguments.length?(a=t,h):a},h.descending=function(t){return arguments.length?(c=t,h):c},h.collapse=function(t){return arguments.length?(l=t,h):l},h.columnNameMap=function(t){return arguments.length?(f=t,h):f},h.defaultColumnNameMap=t,h},it=function(){var t=10,e=function(e){return t<=1?e.map(function(t){return[t]}):n.range(0,Math.ceil(e.length/t)).map(function(n){return e.slice(n*t,(n+1)*t)})};return e.bucketSize=function(n){return arguments.length?(t=n,e):t},e},ot=function(){function t(t){var e=t.map(function(t){return[r(t),i(t)]});return n.range(1,e.length-1).map(function(t){var n=e[t-1],r=e[t],i=e[t+1],o=(n[0]-i[0])*(r[1]-n[1]),u=(n[0]-r[0])*(i[1]-n[1]);return Math.abs(.5*o*u)})}var e=it(),r=function(t){return t},i=function(t){return t},o=function(r){if(e.bucketSize()>=r.length)return r;var i=t(r),o=e(i),u=e(r.slice(1,r.length-1)),a=u.map(function(t,e){var r=o[e],i=n.max(r);return t[r.indexOf(i)]});return[].concat([r[0]],a,[r[r.length-1]])};return T(o,e,"bucketSize"),o.x=function(t){return arguments.length?(r=t,o):r},o.y=function(t){return arguments.length?(i=t,o):i},o},ut=function(){var t=function(t){return t},e=function(t){return t},r=it(),i=function(i){if(r.bucketSize()>=i.length)return i;var o=r(i.slice(1,i.length-1)),u=i[0],a=i[i.length-1],c=[].concat([u],o,[a]),l=t(u),f=e(u),h=o.map(function(r,i){var o=n.mean(c[i+1],t),u=n.mean(c[i+1],e),a=r.map(function(n){return[t(n),e(n)]}),h=a.map(function(t){var n=(l-o)*(t[1]-f),e=(l-t[0])*(u-f);return Math.abs(.5*n*e)}),s=h.indexOf(n.max(h)),d=a[s];return l=d[0],f=d[1],r[s]});return[].concat([i[0]],h,[i[i.length-1]])};return T(i,r,"bucketSize"),i.x=function(n){return arguments.length?(t=n,i):t},i.y=function(t){return arguments.length?(e=t,i):e},i},at=function(){var t=it(),e=function(t){return t},r=function(r){if(t.bucketSize()>r.length)return r;var i=n.extent(r,e),o=t(r.slice(1,r.length-1)),u=o.map(function(t,n){var r,o,u={},a=!0,c=t.map(e),l=c.filter(function(t){return t===i[0]||t===i[1]}).map(function(t){return c.indexOf(t)})[0];return void 0!==l?t[l]:(c.forEach(function(t,n){void 0===u[t]&&(u[t]=0),u[t]++,u[t]>u[r]||void 0===r?(r=t,o=n,a=!0):u[t]===u[r]&&(a=!1)}),a?t[o]:t[Math.floor(t.length/2)])});return[].concat([r[0]],u,[r[r.length-1]])};return T(r,t,"bucketSize"),r.value=function(t){return arguments.length?(e=t,r):e},r},ct=function(t){return"function"==typeof t?t:function(){return t}},lt=function(){var t=null,n=function(t){return t.date},e=function(t){return t.open},r=function(t){return t.high},i=function(t){return t.low},o=function(t){return t.close},a="vertical",c=ct(3),l=function(l){var f=t||u.path();return l.forEach(function(t,u){var l=n(t,u),h=e(t,u),s=r(t,u),d=i(t,u),g=o(t,u),v=c(t,u)/2;"vertical"===a?(f.moveTo(l,d),f.lineTo(l,s),f.moveTo(l,h),f.lineTo(l-v,h),f.moveTo(l,g),f.lineTo(l+v,g)):(f.moveTo(d,l),f.lineTo(s,l),f.moveTo(h,l),f.lineTo(h,l+v),f.moveTo(g,l),f.lineTo(g,l-v))}),t?null:f.toString()};return l.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.x=function(){return arguments.length?(n=ct(arguments.length<=0?void 0:arguments[0]),l):n},l.open=function(){return arguments.length?(e=ct(arguments.length<=0?void 0:arguments[0]),l):e},l.high=function(){return arguments.length?(r=ct(arguments.length<=0?void 0:arguments[0]),l):r},l.low=function(){return arguments.length?(i=ct(arguments.length<=0?void 0:arguments[0]),l):i},l.close=function(){return arguments.length?(o=ct(arguments.length<=0?void 0:arguments[0]),l):o},l.width=function(){return arguments.length?(c=ct(arguments.length<=0?void 0:arguments[0]),l):c},l.orient=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],l):a},l},ft=function(){var t=null,n=function(t){return t.x},e=function(t){return t.y},r="center",i="center",o=function(t){return t.height},a=ct(3),c=function(c,l){var f=t||u.path();return c.forEach(function(t,u){var c=n.call(this,t,l||u),h=e.call(this,t,l||u),s=o.call(this,t,l||u),d=a.call(this,t,l||u),g=void 0;switch(r){case"left":g=d;break;case"right":g=0;break;case"center":g=d/2;break;default:throw new Error("Invalid horizontal alignment "+r)}var v=void 0;switch(i){case"bottom":v=-s;break;case"top":v=0;break;case"center":v=s/2;break;default:throw new Error("Invalid vertical alignment "+i)}f.rect(c-g,h-v,d,s)},this),t?null:f.toString()};return c.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],c):t},c.x=function(){return arguments.length?(n=ct(arguments.length<=0?void 0:arguments[0]),c):n},c.y=function(){return arguments.length?(e=ct(arguments.length<=0?void 0:arguments[0]),c):e},c.width=function(){return arguments.length?(a=ct(arguments.length<=0?void 0:arguments[0]),c):a},c.horizontalAlign=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],c):r},c.height=function(){return arguments.length?(o=ct(arguments.length<=0?void 0:arguments[0]),c):o},c.verticalAlign=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],c):i},c},ht=function(){var t=null,n=function(t){return t.date},e=function(t){return t.open},r=function(t){return t.high},i=function(t){return t.low},o=function(t){return t.close},a=ct(3),c=function(c){var l=t||u.path();return c.forEach(function(t,u){var c=n(t,u),f=e(t,u),h=r(t,u),s=i(t,u),d=o(t,u),g=a(t,u),v=g/2;l.rect(c-v,f,g,d-f),l.moveTo(c,Math.min(d,f)),l.lineTo(c,h),l.moveTo(c,Math.max(d,f)),l.lineTo(c,s)}),t?null:l.toString()};return c.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],c):t},c.x=function(){return arguments.length?(n=ct(arguments.length<=0?void 0:arguments[0]),c):n},c.open=function(){return arguments.length?(e=ct(arguments.length<=0?void 0:arguments[0]),c):e},c.high=function(){return arguments.length?(r=ct(arguments.length<=0?void 0:arguments[0]),c):r},c.low=function(){return arguments.length?(i=ct(arguments.length<=0?void 0:arguments[0]),c):i},c.close=function(){return arguments.length?(o=ct(arguments.length<=0?void 0:arguments[0]),c):o},c.width=function(){return arguments.length?(a=ct(arguments.length<=0?void 0:arguments[0]),c):a},c},st=function(){var t=null,n=function(t){return t.value},e=function(t){return t.median},r=function(t){return t.upperQuartile},i=function(t){return t.lowerQuartile},o=function(t){return t.high},a=function(t){return t.low},c="vertical",l=ct(5),f=ct(.5),h=function(h){var s=t||u.path();return h.forEach(function(t,u){var h=n(t,u),d=l(t,u),g=d/2,v=d*f(t,u),p=v/2,m=o(t,u),y=r(t,u),b=e(t,u),w=i(t,u),x=a(t,u),T=w-y;"vertical"===c?(s.moveTo(h-p,m),s.lineTo(h+p,m),s.moveTo(h,m),s.lineTo(h,y),s.rect(h-g,y,d,T),s.moveTo(h-g,b),s.lineTo(h+g,b),s.moveTo(h,w),s.lineTo(h,x),s.moveTo(h-p,x),s.lineTo(h+p,x)):(s.moveTo(x,h-p),s.lineTo(x,h+p),s.moveTo(x,h),s.lineTo(w,h),s.rect(w,h-g,-T,d),s.moveTo(b,h-g),s.lineTo(b,h+g),s.moveTo(y,h),s.lineTo(m,h),s.moveTo(m,h-p),s.lineTo(m,h+p))}),t?null:s.toString()};return h.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],h):t},h.value=function(){return arguments.length?(n=ct(arguments.length<=0?void 0:arguments[0]),h):n},h.median=function(){return arguments.length?(e=ct(arguments.length<=0?void 0:arguments[0]),h):e},h.upperQuartile=function(){return arguments.length?(r=ct(arguments.length<=0?void 0:arguments[0]),h):r},h.lowerQuartile=function(){return arguments.length?(i=ct(arguments.length<=0?void 0:arguments[0]),h):i},h.high=function(){return arguments.length?(o=ct(arguments.length<=0?void 0:arguments[0]),h):o},h.low=function(){return arguments.length?(a=ct(arguments.length<=0?void 0:arguments[0]),h):a},h.width=function(){return arguments.length?(l=ct(arguments.length<=0?void 0:arguments[0]),h):l},h.orient=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},h.cap=function(){return arguments.length?(f=ct(arguments.length<=0?void 0:arguments[0]),h):f},h},dt=function(){var t=null,n=function(t){return t.x},e=function(t){return t.high},r=function(t){return t.low},i="vertical",o=ct(5),a=function(a){var c=t||u.path();return a.forEach(function(t,u){var a=n(t,u),l=o(t,u),f=l/2,h=e(t,u),s=r(t,u);"vertical"===i?(c.moveTo(a-f,h),c.lineTo(a+f,h),c.moveTo(a,h),c.lineTo(a,s),c.moveTo(a-f,s),c.lineTo(a+f,s)):(c.moveTo(s,a-f),c.lineTo(s,a+f),c.moveTo(s,a),c.lineTo(h,a),c.moveTo(h,a-f),c.lineTo(h,a+f))}),t?null:c.toString()};return a.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.value=function(){return arguments.length?(n=ct(arguments.length<=0?void 0:arguments[0]),a):n},a.high=function(){return arguments.length?(e=ct(arguments.length<=0?void 0:arguments[0]),a):e},a.low=function(){return arguments.length?(r=ct(arguments.length<=0?void 0:arguments[0]),a):r},a.width=function(){return arguments.length?(o=ct(arguments.length<=0?void 0:arguments[0]),a):o},a.orient=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a},gt=function(t){return"function"==typeof t?t:function(){return t}},vt=function(t,n){t=t||"g";var e=function(t,n){return n},r=function(r,i){i=i||function(t){return t};var o=null==n?t:t+"."+n,u=r.selectAll(o).filter(function(){return this.parentNode===r.node()}),c=u.data(i,e),l=c.enter().insert(t).attr("class",n),f=c.exit();return c=c.merge(l),a.selection.prototype.transition&&(l.style("opacity",1e-6),c.transition().style("opacity",1),f.transition().style("opacity",1e-6)),f.remove(),c.enter=function(){return l},c.exit=function(){return f},c};return r.element=function(n){return arguments.length?(t=n,r):t},r.className=function(t){return arguments.length?(n=t,r):n},r.key=function(t){return arguments.length?(e=t,r):e},r},pt=function(t){var n=function(){},e=function(){return[0,0]},r=function(t,n){return[t.x,t.y]},i=t||function(t){return t},o=function(){},u=vt("g","label"),c=function(t){t.each(function(t,c,l){var f=u(a.select(l[c]),t).call(o),h=f.nodes(),s=h.map(function(t,n){var i=a.select(t).datum(),o=r(i,n,h),u=e(i,n,h);return{hidden:!1,x:o[0],y:o[1],width:u[0],height:u[1]}}),d=i(s);f.attr("style",function(t,n){return"display:"+(d[n].hidden?"none":"inherit")}).attr("transform",function(t,n){return"translate("+d[n].x+", "+d[n].y+")"}).attr("layout-width",function(t,n){return d[n].width}).attr("layout-height",function(t,n){return d[n].height}).attr("anchor-x",function(t,n,e){return r(t,n,e)[0]-d[n].x}).attr("anchor-y",function(t,n,e){return r(t,n,e)[1]-d[n].y}),f.call(o),n(f,t,c)})};return S(c,u,L("key")),S(c,i),c.size=function(){return arguments.length?(e=gt(arguments.length<=0?void 0:arguments[0]),c):e},c.position=function(){return arguments.length?(r=gt(arguments.length<=0?void 0:arguments[0]),c):r},c.component=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],c):o},c.decorate=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],c):n},c},mt=function(t){var n=2,e=function(t){return t},r=vt("text"),i=vt("rect"),o=vt("circle"),u=function(t){t.each(function(t,u,c){var l=c[u],f=a.select(l),h=Number(l.getAttribute("layout-width")),s=Number(l.getAttribute("layout-height"));i(f,[t]).attr("width",h).attr("height",s);var d=Number(l.getAttribute("anchor-x")),g=Number(l.getAttribute("anchor-y"));o(f,[t]).attr("r",2).attr("cx",d).attr("cy",g);var v=r(f,[t]);v.enter().attr("dy","0.9em").attr("transform","translate("+n+", "+n+")"),v.text(e)})};return u.padding=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},u.value=function(){return arguments.length?(e=gt(arguments.length<=0?void 0:arguments[0]),u):e},u},yt=function(t,n){return!(t.x>=n.x+n.width||t.x+t.width<=n.x||t.y>=n.y+n.height||t.y+t.height<=n.y)},bt=function(t,n){if(yt(t,n)){var e=Math.max(t.x,n.x),r=Math.min(t.x+t.width,n.x+n.width),i=Math.max(t.y,n.y);return(r-e)*(Math.min(t.y+t.height,n.y+n.height)-i)}return 0},wt=function(t,e){return n.sum(t.map(function(n,r){return e===r?0:bt(t[e],n)}))},xt=function(t,n,e,r,i){return{x:t,y:n,width:e,height:r,location:i}},Tt=function(t){var n=t.x,e=t.y,r=t.width,i=t.height;return[xt(n,e,r,i,"bottom-right"),xt(n-r,e,r,i,"bottom-left"),xt(n-r,e-i,r,i,"top-left"),xt(n,e-i,r,i,"top-right"),xt(n,e-i/2,r,i,"middle-right"),xt(n-r/2,e,r,i,"bottom-center"),xt(n-r,e-i/2,r,i,"middle-left"),xt(n-r/2,e-i,r,i,"top-center")]},kt=function(t,n,e){return[].concat(U(t.slice(0,n)),[e],U(t.slice(n+1)))},St=function(t,n){return t<n},Et=function t(){var e=null,r=St,i=function(){return 0},o=void 0,u=function(t,n){return e-i(o[n],n,o)+i(t,n,kt(o,n,t))},a=function a(c,l){e||(e=n.sum(o.map(function(t,n){return i(t,n,o)})));var f=u(c,l);return r(f,e)?t().locationScore(i).winningScore(r).score(f).rectangles(kt(o,l,c)):a};return a.rectangles=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},
a.score=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.winningScore=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.locationScore=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a},Mt=function(){var t=void 0,n=function(n){return t?n.width*n.height-bt(n,t):0},e=function(t,e,r){return wt(r,e)+n(t)},r=function(t){var n=Et().locationScore(e).rectangles(t);return t.forEach(function(t,e){Tt(t).forEach(function(t,r){n=n(t,e)})}),n.rectangles()};return r.bounds=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r},Lt=function(t){return t[At(t)]},At=function(t){return Math.floor(Math.random()*t.length)},Ht=function(){var t=1e3,n=1,e=void 0,r=function(t){switch(t.location){case"bottom-right":return 0;case"middle-right":case"bottom-center":return t.width*t.height/8}return t.width*t.height/4},i=function(t){return e?t.width*t.height-bt(t,e):0},o=function(t,n,e){return wt(e,n)+i(t)+r(t)},u=function(e){for(var r=t,i=function(t,n){return Math.exp((n-t)/r)>Math.random()},u=Et().locationScore(o).winningScore(i).rectangles(e);r>0;){var a=At(e);u=u(Lt(Tt(e[a])),a),r-=n}return u.rectangles()};return u.temperature=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.cooling=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},u.bounds=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u},Ot=function(t,e){return t[n.scan(t,e)]},_t=function(t){t=t||function(t){return t};var n=function(n){n=t(n);for(;;){if("break"===function(){var t=n.filter(function(t){return!t.hidden}),e=t.map(function(n,e){return[n,wt(t,e)]}),r=Ot(e,function(t,n){return n[1]-t[1]});if(!(r[1]>0))return"break";r[0].hidden=!0}())break}return n};return S(n,t),n},Ct=function(){var t=[0,0],n=function(n){return n.map(function(n,e){var r=n.x,i=n.y;return r+n.width>t[0]&&(r-=n.width),i+n.height>t[1]&&(i-=n.height),{height:n.height,width:n.width,x:r,y:i}})};return n.bounds=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},Dt=function(t,n){t=t||"g";var e=function(t,n){return n},r=null,i=function(i,o){o=o||function(t){return t};var u=i.selection?i:null;u&&(i=i.selection());var a=i.selectAll(function(t,n,e){return Array.from(e[n].childNodes).filter(function(t){return 1===t.nodeType})}).filter(null==n?t:t+"."+n),c=a.data(o,e),l=c.enter().append(t).attr("class",n),f=c.exit();c=c.merge(l);var h=u||r;return h?(c=c.transition(h),l.style("opacity",1e-6).transition(h).style("opacity",1),f=f.transition(h).style("opacity",1e-6).remove()):f.remove(),c.enter=function(){return l},c.exit=function(){return f},c};return i.element=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.className=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.key=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i.transition=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i},It=function(t){return"function"==typeof t?t:function(){return t}},zt=function(t,n){switch(t){case"left":return n/2;case"right":return-n/2;default:return 0}},Vt=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(){return 0},i=function(t){return t.x},o=function(t){return t.y},u=function(){},a="center",c=function(){return 5},l="vertical",f=function(){};return f.defined=function(t,n){return y(r,i,o)(t,n)},f.values=function(e,u){var f=c(e,u),h=zt(a,f);if("vertical"===l){var s=n(o(e,u),u),d=n(r(e,u),u),g=t(i(e,u),u)+h;return{d:e,x:g,y:s,y0:d,width:f,height:s-d,origin:[g,s],baseOrigin:[g,d],transposedX:g,transposedY:s}}var v=t(o(e,u),u),p=t(r(e,u),u),m=n(i(e,u),u)+h;return{d:e,x:m,y:v,y0:p,width:f,height:v-p,origin:[v,m],baseOrigin:[p,m],transposedX:v,transposedY:m}},f.decorate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],f):u},f.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],f):t},f.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],f):n},f.baseValue=function(){return arguments.length?(r=It(arguments.length<=0?void 0:arguments[0]),f):r},f.crossValue=function(){return arguments.length?(i=It(arguments.length<=0?void 0:arguments[0]),f):i},f.mainValue=function(){return arguments.length?(o=It(arguments.length<=0?void 0:arguments[0]),f):o},f.bandwidth=function(){return arguments.length?(c=It(arguments.length<=0?void 0:arguments[0]),f):c},f.align=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],f):a},f.orient=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],f):l},f},Nt={red:"#c60",green:"#6c0",black:"#000",gray:"#ddd",darkGray:"#999"},Pt=function(){var t=Vt(),n=c.line().defined(t.defined).x(function(n,e){return t.values(n,e).transposedX}).y(function(n,e){return t.values(n,e).transposedY}),e=Dt("path","line"),r=function(r){r.selection&&e.transition(r),r.each(function(r,i,o){var u=e(a.select(o[i]),[r]);u.attr("d",n).attr("fill","none").attr("stroke",Nt.black),t.decorate()(u,r,i)})};return S(r,t,M("baseValue","bandwidth","align")),T(r,e,"key"),T(r,n,"curve"),r},Ft=function(){var t=Vt(),n=c.line().defined(t.defined).x(function(n,e){return t.values(n,e).transposedX}).y(function(n,e){return t.values(n,e).transposedY}),e=function(e){var r=n.context();r.beginPath(),n(e),r.strokeStyle=Nt.black,t.decorate()(r,e),r.stroke(),r.closePath()};return S(e,t,M("baseValue","bandwidth","align")),T(e,n,"curve","context"),e},Rt=function(){var t=c.symbol(),n=Vt(),e=Dt("g","point"),r=function(t){return"translate("+t[0]+", "+t[1]+")"},i=function(i){i.selection&&e.transition(i),i.each(function(i,o,u){var c=i.filter(n.defined),l=e(a.select(u[o]),c);l.enter().attr("transform",function(t,e){return r(n.values(t,e).origin)}).attr("fill",Nt.gray).attr("stroke",Nt.black).append("path"),l.attr("transform",function(t,e){return r(n.values(t,e).origin)}).select("path").attr("d",t),n.decorate()(l,i,o)})};return S(i,n,M("baseValue","bandwidth","align")),T(i,e,"key"),T(i,t,"type","size"),i},Ut=function(){var t=c.symbol(),n=Vt(),e=function(e){var r=e.filter(n.defined),i=t.context();r.forEach(function(r,o){i.save();var u=n.values(r,o);i.translate(u.origin[0],u.origin[1]),i.beginPath(),t(e),i.strokeStyle=Nt.black,i.fillStyle=Nt.gray,n.decorate()(i,r,o),i.stroke(),i.fill(),i.closePath(),i.restore()})};return S(e,n,M("baseValue","bandwidth","align")),T(e,t,"size","type","context"),e},qt=function(){var t=ft().x(0).y(0),n=Vt(),e=Dt("g","bar"),r=function(t){return"vertical"===n.orient()?t.height:t.width},i=function(t){return"vertical"===n.orient()?t.width:t.height},o=function(t){return"translate("+t[0]+", "+t[1]+")"},u=function(u){u.selection&&e.transition(u),u.each(function(u,c,l){var f=n.orient();if("vertical"!==f&&"horizontal"!==f)throw new Error("The bar series does not support an orientation of "+f);var h=u.filter(n.defined),s=h.map(n.values);t.width(0).height(0),"vertical"===n.orient()?(t.verticalAlign("top"),t.horizontalAlign("center")):(t.horizontalAlign("right"),t.verticalAlign("center"));var d=e(a.select(l[c]),h);d.enter().attr("transform",function(t,n){return o(s[n].baseOrigin)}).attr("class","bar "+n.orient()).attr("fill",Nt.darkGray).append("path").attr("d",function(n,e){return i(t)(s[e].width),t([n])}),d.attr("transform",function(t,n){return o(s[n].origin)}).select("path").attr("d",function(n,e){return i(t)(s[e].width),r(t)(-s[e].height),t([n])}),n.decorate()(d,h,c)})};return S(u,n),T(u,e,"key"),u},Bt=function(){var t=Vt(),n=ft().x(0).y(0),e=function(n){return"vertical"===t.orient()?n.height:n.width},r=function(n){return"vertical"===t.orient()?n.width:n.height},i=function(i){var o=n.context(),u=i.filter(t.defined),a=u.map(t.values);"vertical"===t.orient()?(n.verticalAlign("top"),n.horizontalAlign("center")):(n.horizontalAlign("right"),n.verticalAlign("center")),a.forEach(function(i,u){o.save(),o.beginPath(),o.translate(i.origin[0],i.origin[1]),e(n)(-i.height),r(n)(i.width),n([i]),o.fillStyle=Nt.darkGray,t.decorate()(o,i.d,u),o.fill(),o.closePath(),o.restore()})};return S(i,t),T(i,n,"context"),i},jt=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(t){return t.high},i=function(t){return t.low},o=function(t){return t.cross},u="vertical",a="center",c=function(){return 5},l=function(){},f=function(){};return f.defined=function(t,n){return y(i,r,o)(t,n)},f.values=function(e,l){var f=c(e,l),h=zt(a,f);if("vertical"===u){var s=n(r(e,l));return{origin:[t(o(e,l))+h,s],high:0,low:n(i(e,l))-s,width:f}}var d=t(i(e,l));return{origin:[d,n(o(e,l))+h],high:t(r(e,l))-d,low:0,width:f}},f.decorate=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],f):l},f.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],f):u},f.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],f):t},f.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],f):n},f.lowValue=function(){return arguments.length?(i=It(arguments.length<=0?void 0:arguments[0]),f):i},f.highValue=function(){return arguments.length?(r=It(arguments.length<=0?void 0:arguments[0]),f):r},f.crossValue=function(){return arguments.length?(o=It(arguments.length<=0?void 0:arguments[0]),f):o},f.bandwidth=function(){return arguments.length?(c=It(arguments.length<=0?void 0:arguments[0]),f):c},f.align=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],f):a},f.decorate=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],f):l},f},Qt=function(){var t=jt(),n=Dt("g","error-bar"),e=dt().value(0),r=function(t){return function(n){return t.selection?n.transition(t):n}},i=function(t){return"translate("+t.origin[0]+", "+t.origin[1]+")"},o=function(o){o.selection&&n.transition(o);var u=r(o);o.each(function(r,o,c){var l=r.filter(t.defined),f=l.map(t.values),h=n(a.select(c[o]),l);h.enter().attr("stroke",Nt.black).attr("fill",Nt.gray).attr("transform",function(n,e){return i(t.values(n,e))+" scale(1e-6, 1)"}).append("path"),e.orient(t.orient()),h.each(function(t,n,r){var o=f[n];e.high(o.high).low(o.low).width(o.width),u(a.select(r[n])).attr("transform",i(o)+" scale(1)").select("path").attr("d",e([t]))}),t.decorate()(h,r,o)})};return S(o,t),T(o,n,"key"),o},Gt=function(){var t=jt(),n=dt().value(0),e=function(e){var r=e.filter(t.defined),i=n.context();n.orient(t.orient()),r.forEach(function(e,r){i.save();var o=t.values(e,r);i.translate(o.origin[0],o.origin[1]),i.beginPath(),n.high(o.high).width(o.width).low(o.low)([e]),i.strokeStyle=Nt.black,i.fillStyle=Nt.gray,t.decorate()(i,e,r),i.stroke(),i.fill(),i.closePath(),i.restore()})};return S(e,t),T(e,n,"context"),e},Yt=function(){var t=Vt(),n=c.area().defined(t.defined),e=Dt("path","area"),r=function(r){r.selection&&e.transition(r),r.each(function(r,i,o){var u=r.map(t.values);n.x(function(t,n){return u[n].transposedX}).y(function(t,n){return u[n].transposedY});var c="vertical"===t.orient()?"y":"x";n[c+"0"](function(t,n){return u[n].y0}),n[c+"1"](function(t,n){return u[n].y});var l=e(a.select(o[i]),[r]);l.attr("d",n).attr("fill",Nt.gray),t.decorate()(l,r,i)})};return S(r,t,M("bandwidth","align")),T(r,e,"key"),T(r,n,"curve"),r},Xt=function(){var t=Vt(),n=c.area().defined(t.defined),e=function(e){var r=n.context(),i=e.map(t.values);n.x(function(t,n){return i[n].transposedX}).y(function(t,n){return i[n].transposedY});var o="vertical"===t.orient()?"y":"x";n[o+"0"](function(t,n){return i[n].y0}),n[o+"1"](function(t,n){return i[n].y}),r.beginPath(),n(e),r.fillStyle=Nt.gray,t.decorate()(r,e),r.fill(),r.closePath()};return S(e,t,M("bandwidth","align")),T(e,n,"curve","context"),e},Wt=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(t){return t.date},i=function(t){return t.open},o=function(t){return t.high},u=function(t){return t.low},a=function(t){return t.close},c=function(){return 5},l="center",f=function(){},h=function(n,e){return t(r(n,e))},s=function(){};return s.defined=function(t,n){return y(r,i,u,o,a)(t,n)},s.values=function(t,e){var r=a(t,e),f=i(t,e),s=c(t,e),d=zt(l,s),g="";return r>f?g="up":r<f&&(g="down"),{cross:h(t,e)+d,open:n(f),high:n(o(t,e)),low:n(u(t,e)),close:n(r),width:s,direction:g}},s.decorate=function(){return arguments.length?(f=arguments.length<=0?void 0:arguments[0],s):f},s.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},s.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n},s.crossValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],s):r},s.openValue=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s.highValue=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],s):o},s.lowValue=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],s):u},s.yValue=s.closeValue=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],s):a},s.bandwidth=function(){return arguments.length?(c=It(arguments.length<=0?void 0:arguments[0]),s):c},s.align=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],s):l},s},Zt=function(t,n){var e=Wt(),r=Dt("g",n),i=function(t){return"translate("+t.cross+", "+t.high+")"},o=function(t){return function(n){return t.selection?n.transition(t):n}},u=function(u){u.selection&&r.transition(u);var c=o(u);u.each(function(o,u,l){var f=o.filter(e.defined),h=r(a.select(l[u]),f);h.enter().attr("transform",function(t,n){return i(e.values(t,n))+" scale(1e-6, 1)"}).append("path"),h.each(function(r,o,u){var l=e.values(r,o),f="up"===l.direction?Nt.green:Nt.red,h=c(a.select(u[o])).attr("class",n+" "+l.direction).attr("stroke",f).attr("fill",f).attr("transform",function(){return i(l)+" scale(1)"});t.x(0).width(l.width).open(function(){return l.open-l.high}).high(0).low(function(){return l.low-l.high}).close(function(){return l.close-l.high}),h.select("path").attr("d",t([r]))}),e.decorate()(h,o,u)})};return T(u,r,"key"),S(u,e),u},Kt=function(){return Zt(ht(),"candlestick")},$t=function(t){var n=Wt(),e=function(e){var r=e.filter(n.defined),i=t.context();r.forEach(function(e,r){i.save();var o=n.values(e,r);i.translate(o.cross,o.high),i.beginPath(),t.x(0).open(function(){return o.open-o.high}).width(o.width).high(0).low(function(){return o.low-o.high}).close(function(){return o.close-o.high})([e]);var u="up"===o.direction?Nt.green:Nt.red;i.strokeStyle=u,i.fillStyle=u,n.decorate()(i,e,r),i.stroke(),i.fill(),i.closePath(),i.restore()})};return T(e,t,"context"),S(e,n),e},Jt=function(){return $t(ht())},tn=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(t){return t.upperQuartile},i=function(t){return t.lowerQuartile},o=function(t){return t.high},u=function(t){return t.low},a=function(t){return t.value},c=function(t){return t.median},l="vertical",f="center",h=function(){return 5},s=function(){},d=function(){};return d.defined=function(t,n){return y(u,o,i,r,a,c)(t,n)},d.values=function(e,s){var d=h(e,s),g=zt(f,d);if("vertical"===l){var v=n(o(e,s));return{origin:[t(a(e,s))+g,v],high:0,upperQuartile:n(r(e,s))-v,median:n(c(e,s))-v,lowerQuartile:n(i(e,s))-v,low:n(u(e,s))-v,width:d}}var p=t(u(e,s));return{origin:[p,n(a(e,s))+g],high:t(o(e,s))-p,upperQuartile:t(r(e,s))-p,median:t(c(e,s))-p,lowerQuartile:t(i(e,s))-p,low:0,width:d}},d.decorate=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],d):s},d.orient=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],d):l},d.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],d):t},d.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],d):n},d.lowerQuartileValue=function(){return arguments.length?(i=It(arguments.length<=0?void 0:arguments[0]),d):i},d.upperQuartileValue=function(){return arguments.length?(r=It(arguments.length<=0?void 0:arguments[0]),d):r},d.lowValue=function(){return arguments.length?(u=It(arguments.length<=0?void 0:arguments[0]),d):u},d.highValue=function(){return arguments.length?(o=It(arguments.length<=0?void 0:arguments[0]),d):o},d.crossValue=function(){return arguments.length?(a=It(arguments.length<=0?void 0:arguments[0]),d):a},d.medianValue=function(){return arguments.length?(c=It(arguments.length<=0?void 0:arguments[0]),d):c},d.bandwidth=function(){return arguments.length?(h=It(arguments.length<=0?void 0:arguments[0]),d):h},d.decorate=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],d):s},d.align=function(){return arguments.length?(f=arguments.length<=0?void 0:arguments[0],d):f},d},nn=function(){var t=tn(),n=Dt("g","box-plot"),e=st().value(0),r=function(t){return function(n){return t.selection?n.transition(t):n}},i=function(t){return"translate("+t.origin[0]+", "+t.origin[1]+")"},o=function(o){o.selection&&n.transition(o);var u=r(o);o.each(function(r,o,c){var l=r.filter(t.defined),f=n(a.select(c[o]),l);f.enter().attr("stroke",Nt.black).attr("fill",Nt.gray).attr("transform",function(n,e){return i(t.values(n,e))+" scale(1e-6, 1)"}).append("path"),e.orient(t.orient()),f.each(function(n,r,o){var c=t.values(n,r);e.median(c.median).upperQuartile(c.upperQuartile).lowerQuartile(c.lowerQuartile).width(c.width).high(c.high).low(c.low),u(a.select(o[r])).attr("transform",i(c)).select("path").attr("d",e([n]))}),t.decorate()(f,r,o)})};return S(o,t),T(o,n,"key"),T(o,e,"cap"),o},en=function(){var t=tn(),n=st().value(0),e=function(e){var r=e.filter(t.defined),i=n.context();n.orient(t.orient()),r.forEach(function(e,r){i.save();var o=t.values(e,r);i.translate(o.origin[0],o.origin[1]),i.beginPath(),n.median(o.median).upperQuartile(o.upperQuartile).lowerQuartile(o.lowerQuartile).high(o.high).width(o.width).low(o.low)([e]),i.strokeStyle=Nt.black,i.fillStyle=Nt.gray,t.decorate()(i,e,r),i.stroke(),i.fill(),i.closePath(),i.restore()})};return S(e,t),T(e,n,"cap","context"),e},rn=function(){return Zt(lt(),"ohlc")},on=function(){return $t(lt())},un=function(){var t=function(){},n=e.scaleIdentity(),r=e.scaleIdentity(),i=[],o=function(t){return t},u=function(t,n){return n},a=function(){};return a.mapping=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},a.key=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],a):u},a.series=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.yScale=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.decorate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a},an=function(){var t=un(),n=Dt("g"),e=Dt("g","multi"),r=function(r){r.selection&&(e.transition(r),n.transition(r));var i=t.mapping(),o=t.series(),u=t.xScale(),c=t.yScale();r.each(function(r,l,f){var h=e(a.select(f[l]),o);h.each(function(t,e,l){t.xScale(u).yScale(c);var f=i(r,e,o);n(a.select(l[e]),[f]).call(t)}),(h.selection?h.selection():h).order(),t.decorate()(h,r,l)})};return S(r,t),T(r,e,"key"),r},cn=function(){var t=null,n=un(),e=function(e){var r=n.mapping(),i=n.series(),o=n.xScale(),u=n.yScale();i.forEach(function(a,c){var l=r(e,c,i);a.context(t).xScale(o).yScale(u);var f=a.decorate();a.decorate(function(t,r,i){n.decorate()(t,e,c),f(t,r,i)}),a(l),a.decorate(f)})};return e.context=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],e):t},S(e,n),e},ln=function(t){var r=function(){return 50},i=function(){},o=e.scaleLinear(),u="center",a=e.scaleBand(),c=function(){};return c.offsetScaleForDatum=function(t,e,i){var o=r(e,i),c=zt(u,o),l=o/2;return a.domain(n.range(0,t.length)).range([-l+c,l+c])},c.bandwidth=function(){return arguments.length?(r=It(arguments.length<=0?void 0:arguments[0]),c):r},c.align=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],c):u},c.decorate=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],c):i},c.xScale=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],c):o},S(c,a,A({paddingInner:"paddingOuter"})),c},fn=function(t){var n=ln(),e=Dt("g","grouped"),r=function(r){r.selection&&e.transition(r),r.each(function(r,i,o){var u=e(a.select(o[i]),r);u.enter().append("g"),u.select("g").each(function(e,i,o){var u=a.select(o[i]),c=function(t,e){var o=n.offsetScaleForDatum(r,t,e);return n.xScale()(t)+o(i)+o.bandwidth()/2};t.xScale(c),t.bandwidth&&t.bandwidth(function(t,e){return n.offsetScaleForDatum(r,t,e).bandwidth()}),t.decorate(function(t,e){return n.decorate()(t,e,i)}),u.call(t)})})};return S(r,t,M("decorate","xScale")),S(r,n,M("offsetScaleForDatum")),r},hn=function(t){var n=ln(),e=function(e){e.forEach(function(r,i){var o=function(t,r){var o=n.offsetScaleForDatum(e,t,r);return n.xScale()(t)+o(i)+o.bandwidth()/2};t.xScale(o),t.bandwidth&&t.bandwidth(function(t,r){return n.offsetScaleForDatum(e,t,r).bandwidth()}),t.decorate(function(t,e){return n.decorate()(t,e,i)}),t(r)})};return S(e,t,M("decorate","xScale")),S(e,n,M("configureOffsetScale","configureOffset")),e},sn=function(){var t="vertical",n=Pt(),e=an(),r=function(r){return r.each(function(r,i,o){"vertical"===t?e.series(r[0].map(function(t){return n})).mapping(function(t,n){return t.map(function(t){return t[n]})}):e.series(r.map(function(t){return n})).mapping(function(t,n){return t[n]}),a.select(o[i]).call(e)})};return r.series=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r):n},r.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},S(r,e,M("series","mapping")),r},dn=function(){var t="vertical",n=Ft(),e=cn(),r=function(r){"vertical"===t?e.series(r[0].map(function(t){return n})).mapping(function(t,n){return t.map(function(t){return t[n]})}):e.series(r.map(function(t){return n})).mapping(function(t,n){return t[n]}),e(r)};return r.series=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r):n},r.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},S(r,e,M("series","mapping")),r},gn=function(t){var e=.75,r=function(t){if(t.length<=1)return 10;t.sort();var r=n.pairs(t).map(function(t){return Math.abs(t[0]-t[1])}),i=n.min(r);return e*i},i=function(n){var e=function(n){var e=t.orient&&"horizontal"===t.orient()?t.yScale():t.xScale();if(e.bandwidth)t.bandwidth(e.bandwidth());else{var i,o=Array.isArray(n)?(i=[]).concat.apply(i,U(n)):n,u=o.filter(t.defined).map(t.crossValue()).map(e),a=r(u);t.bandwidth(a)}};n instanceof a.selection?n.each(function(n,r,i){e(n),t(a.select(i[r]))}):(e(n),t(n))};return S(i,t),i.widthFraction=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i},vn=function(t){return"function"==typeof t?t:function(){return t}},pn=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r="horizontal",i=function(t){return t.from},o=function(t){return t.to},u=function(){},c=Dt("g","annotation-band"),l=ft().horizontalAlign("center").verticalAlign("center").x(0).y(0),f=function(e){if(e.selection&&c.transition(e),"horizontal"!==r&&"vertical"!==r)throw new Error("Invalid orientation");var f="horizontal"===r,h=f?function(t,n){return"translate("+t+", "+n+")"}:function(t,n){return"translate("+n+", "+t+")"},s=f?t:n,d=f?n:t,g=s.range(),v=g[1]-g[0],p=f?"height":"width",m=f?"width":"height",y=function(){return h((g[1]+g[0])/2,(d(o.apply(void 0,arguments))+d(i.apply(void 0,arguments)))/2)};l[m](v),l[p](function(){return d(o.apply(void 0,arguments))-d(i.apply(void 0,arguments))}),e.each(function(t,n,e){var i=c(a.select(e[n]),t);i.enter().attr("transform",y).append("path").classed("band",!0),i.attr("class","annotation-band "+r).attr("transform",y).select("path").attr("d",function(t,n){return l([t],n)}),u(i,t,n)})};return f.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],f):t},f.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],f):n},f.orient=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],f):r},f.decorate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],f):u},f.fromValue=function(){return arguments.length?(i=vn(arguments.length<=0?void 0:arguments[0]),f):i},f.toValue=function(){return arguments.length?(o=vn(arguments.length<=0?void 0:arguments[0]),f):o},f},mn=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(t){return t},i=r,o=function(){},u="horizontal",c=Dt("g","annotation-line"),l=function(e){if(e.selection&&c.transition(e),"horizontal"!==u&&"vertical"!==u)throw new Error("Invalid orientation");var l="horizontal"===u,f=l?function(t,n){return"translate("+t+", "+n+")"}:function(t,n){return"translate("+n+", "+t+")"},h=l?"x2":"y2",s=l?t:n,d=l?n:t,g=l?"left-handle":"bottom-handle",v=l?"right-handle":"top-handle",p=l?"9":"0",m=l?"0":"9",y=l?"0.32em":"0.71em",b=l?"start":"middle",w=s.range(),x=function(){return f(w[0],d(r.apply(void 0,arguments)))},T=w[1]-w[0];e.each(function(t,n,e){var r=c(a.select(e[n]),t),l=r.enter().attr("transform",x).style("stroke","#bbb");l.append("line").attr(h,T),l.append("g").classed(g,!0).style("stroke","none"),l.append("g").classed(v,!0).style("stroke","none").attr("transform",f(T,0)).append("text").attr("text-anchor",b).attr("x",p).attr("y",m).attr("dy",y),r.attr("class","annotation-line "+u),r.attr("transform",x),r.select("line").attr(h,T),r.select("g."+v).attr("transform",f(T,0)),r.select("text").text(i),o(r,t,n)})};return l.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.value=function(){return arguments.length?(r=vn(arguments.length<=0?void 0:arguments[0]),l):r},l.label=function(){return arguments.length?(i=vn(arguments.length<=0?void 0:arguments[0]),l):i},l.decorate=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],l):o},l.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],l):u},l},yn=function(t){return function(e){if(e.length<=1)return 10;e.sort();var r=n.pairs(e).map(function(t){return Math.abs(t[0]-t[1])}),i=n.min(r);return t*i}},bn=function(t){return"function"==typeof t?t:function(){return t}},wn=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(){return 0},i=function(t){return t.x},o=function(t){return t.y},u=function(){},a=yn(.75),c="vertical",l=function(){};return l.defined=function(t,n){return b(r,i,o)(t,n)},l.values=function(e,u){if("vertical"===c){var a=n(o(e,u)),l=n(r(e,u)),f=t(i(e,u));return{d:e,x:f,y:a,y0:l,height:a-l,origin:[f,a],baseOrigin:[f,l],transposedX:f,transposedY:a}}var h=t(o(e,u)),s=t(r(e,u)),d=n(i(e,u));return{d:e,x:d,y:h,y0:s,height:h-s,origin:[h,d],baseOrigin:[s,d],transposedX:h,transposedY:d}},l.decorate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],l):u},l.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.baseValue=function(){return arguments.length?(r=bn(arguments.length<=0?void 0:arguments[0]),l):r},l.crossValue=function(){return arguments.length?(i=bn(arguments.length<=0?void 0:arguments[0]),l):i},l.mainValue=function(){return arguments.length?(o=bn(arguments.length<=0?void 0:arguments[0]),l):o},l.barWidth=function(){return arguments.length?(a=bn(arguments.length<=0?void 0:arguments[0]),l):a},l.orient=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],l):c},l},xn={red:"#c60",green:"#6c0",black:"#000",gray:"#ddd",darkGray:"#999"},Tn=function(){var t=c.symbol(),n=wn(),e=Dt("g","point"),r=function(t){return"translate("+t[0]+", "+t[1]+")"},i=function(i){i.selection&&e.transition(i),i.each(function(i,o,u){var c=i.filter(n.defined),l=e(a.select(u[o]),c);l.enter().attr("transform",function(t,e){return r(n.values(t,e).origin)}).attr("fill",xn.gray).attr("stroke",xn.black).append("path"),l.attr("transform",function(t,e){return r(n.values(t,e).origin)}).select("path").attr("d",t),n.decorate()(l,i,o)})};return S(i,n,M("baseValue","barWidth")),T(i,e,"key"),T(i,t,"type","size"),i},kn=function(){var t=function(){},n=e.scaleIdentity(),r=e.scaleIdentity(),i=[],o=function(t){return t},u=function(t,n){return n},a=function(){};return a.mapping=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},a.key=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],a):u},a.series=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],a):i},a.xScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.yScale=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.decorate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a},Sn=function(){var t=kn(),n=Dt("g"),e=Dt("g","multi"),r=function(r){r.selection&&(e.transition(r),n.transition(r));var i=t.mapping(),o=t.series(),u=t.xScale(),c=t.yScale();r.each(function(r,l,f){var h=e(a.select(f[l]),o);h.each(function(t,e,o){t.xScale(u).yScale(c);var l=i(r,t,e);n(a.select(o[e]),[l]).call(t)}),(h.selection?h.selection():h).order(),t.decorate()(h,r,l)})};return S(r,t),T(r,e,"key"),r},En=function(){var t=function(t){return t.x},n=function(t){return t.y},r=e.scaleIdentity(),i=e.scaleIdentity(),o=function(){},u=Dt("g","annotation-crosshair"),c=Tn(),l=mn(),f=mn().orient("vertical"),h=e.scaleIdentity(),s=e.scaleIdentity(),d=Sn().series([l,f,c]).xScale(h).yScale(s).mapping(function(t){return[t]}),g=function(e){e.selection&&u.transition(e),e.each(function(e,g,v){var p=u(a.select(v[g]),e);p.enter().style("pointer-events","none"),h.range(r.range()),s.range(i.range()),c.crossValue(t).mainValue(n),l.value(n),f.value(t),p.call(d),o(p,e,g)})};g.x=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],g):t},g.y=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],g):n},g.xScale=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],g):r},g.yScale=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],g):i},g.decorate=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],g):o};var v=L("label");return S(g,l,v,O("y")),S(g,f,v,O("x")),g},Mn=function(){var t=e.scaleIdentity(),n=10,r=null,i=function(){return null!=r?r:t.ticks?t.ticks(n):t.domain()};return i.scale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.ticks=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.tickValues=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i},Ln=function(t){return t},An=function(){var t=function(){},n=function(){},e=Mn(),r=Mn(),i=Dt("line","gridline-y").key(Ln),o=Dt("line","gridline-x").key(Ln),u=function(u){u.selection&&(i.transition(u),o.transition(u)),u.each(function(u,c,l){var f=l[c],h=a.select(l[c]),s=e.scale(),d=r.scale(),g=f.__x_scale__||s;f.__x_scale__=s.copy();var v=e(),p=i(h,v);p.attr("x1",s).attr("x2",s).attr("y1",d.range()[0]).attr("y2",d.range()[1]).attr("stroke","#bbb"),p.enter().attr("x1",g).attr("x2",g).attr("y1",d.range()[0]).attr("y2",d.range()[1]),p.exit().attr("x1",s).attr("x2",s),t(p,v,c);var m=f.__y_scale__||d;f.__y_scale__=d.copy();var y=r(),b=o(h,y);b.attr("y1",d).attr("y2",d).attr("x1",s.range()[0]).attr("x2",s.range()[1]).attr("stroke","#bbb"),b.enter().attr("y1",m).attr("y2",m).attr("x1",s.range()[0]).attr("x2",s.range()[1]),b.exit().attr("y1",d).attr("y2",d),n(b,y,c)})};return u.yDecorate=function(){
return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},u.xDecorate=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},S(u,i,A({key:"xKey"})),S(u,o,A({key:"yKey"})),S(u,e,O("x")),S(u,r,O("y")),u},Hn=function(t){return t},On=function(t,n){var e=[10],r=null,i=function(){},o=null,u=6,l=6,f=3,h=c.line(),s=Dt("g","tick").key(Hn),d=Dt("path","domain"),g=function(t,n){var e=0;return t.bandwidth&&(e=t.bandwidth()/2,t.round()&&(e=Math.round(e))),function(r){return n(t(r)+e,0)}},v=function(t,n){return m()?"translate("+n+", "+t+")":"translate("+t+", "+n+")"},p=function(t){return m()?t.map(function(t){return[t[1],t[0]]}):t},m=function(){return"left"===t||"right"===t},y=function(t,e,r){return n[t]?n[t].apply(n,e):r},b=function(c){c.selection&&(s.transition(c),d.transition(c)),c.each(function(c,b,w){var x=w[b],T=a.select(x);x.__scale__||T.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","right"===t?"start":"left"===t?"end":"middle");var k=x.__scale__||n;x.__scale__=n.copy();var S=null==r?y("ticks",e,n.domain()):r,E=null==o?y("tickFormat",e,Hn):o,M="bottom"===t||"right"===t?1:-1,L=n.range(),A=p([[L[0],M*u],[L[0],0],[L[1],0],[L[1],M*u]]);d(T,[c]).attr("d",h(A)).attr("stroke","#000");var H=s(T,S);H.enter().attr("transform",g(k,v)).append("path").attr("stroke","#000");var O=M*(l+f);H.enter().append("text").attr("transform",v(0,O)).attr("fill","#000"),H.exit().attr("transform",g(n,v)),H.select("path").attr("d",function(t){return h(p([[0,0],[0,M*l]]))}),H.select("text").attr("transform",v(0,O)).attr("dy",function(){var n="0em";return m()?n="0.32em":"bottom"===t&&(n="0.71em"),n}).text(E),H.attr("transform",g(n,v)),i(H,c,b)})};return b.tickFormat=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],b):o},b.tickSize=function(){return arguments.length?(l=u=Number(arguments.length<=0?void 0:arguments[0]),b):l},b.tickSizeInner=function(){return arguments.length?(l=Number(arguments.length<=0?void 0:arguments[0]),b):l},b.tickSizeOuter=function(){return arguments.length?(u=Number(arguments.length<=0?void 0:arguments[0]),b):u},b.tickPadding=function(){return arguments.length?(f=arguments.length<=0?void 0:arguments[0],b):f},b.decorate=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],b):i},b.scale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],b):n},b.ticks=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=[].concat(n),b},b.tickArguments=function(){return arguments.length?(e=null==(arguments.length<=0?void 0:arguments[0])?[]:[].concat(U(arguments.length<=0?void 0:arguments[0])),b):e.slice()},b.tickValues=function(){return arguments.length?(r=null==(arguments.length<=0?void 0:arguments[0])?[]:[].concat(U(arguments.length<=0?void 0:arguments[0])),b):r.slice()},b},_n=function(t){return On("top",t)},Cn=function(t){return On("bottom",t)},Dn=function(t){return On("left",t)},In=function(t){return On("right",t)};!function(t,n){function e(){var t=M.splice(0,M.length);for(Zt=0;t.length;)t.shift().call(null,t.shift())}function r(t,n){for(var e=0,r=t.length;e<r;e++)v(t[e],n)}function i(t){for(var n,e=0,r=t.length;e<r;e++)n=t[e],D(n,ot[u(n)])}function o(t){return function(n){Nt(n)&&(v(n,t),ut.length&&r(n.querySelectorAll(ut),t))}}function u(t){var n=qt.call(t,"is"),e=t.nodeName.toUpperCase(),r=ct.call(it,n?nt+n.toUpperCase():tt+e);return n&&-1<r&&!a(e,n)?-1:r}function a(t,n){return-1<ut.indexOf(t+'[is="'+n+'"]')}function c(t){var n=t.currentTarget,e=t.attrChange,r=t.attrName,i=t.target,o=t[X]||2,u=t[Z]||3;en&&(!i||i===n)&&n[q]&&"style"!==r&&(t.prevValue!==t.newValue||""===t.newValue&&(e===o||e===u))&&n[q](r,e===o?null:t.prevValue,e===u?null:t.newValue)}function l(t){var n=o(t);return function(t){M.push(n,t.target),Zt&&clearTimeout(Zt),Zt=setTimeout(e,1)}}function f(t){nn&&(nn=!1,t.currentTarget.removeEventListener($,f)),ut.length&&r((t.target||k).querySelectorAll(ut),t.detail===R?R:P),zt&&d()}function h(t,n){var e=this;Qt.call(e,t,n),L.call(e,{target:e})}function s(t,n){Ct(t,n),O?O.observe(t,Xt):(tn&&(t.setAttribute=h,t[V]=H(t),t[N](J,L)),t[N](K,c)),t[G]&&en&&(t.created=!0,t[G](),t.created=!1)}function d(){for(var t,n=0,e=Pt.length;n<e;n++)t=Pt[n],at.contains(t)||(e--,Pt.splice(n--,1),v(t,R))}function g(t){throw new Error("A "+t+" type is already registered")}function v(t,n){var e,r,i=u(t);-1<i&&(C(t,ot[i]),i=0,n!==P||t[P]?n===R&&!t[R]&&(t[P]=!1,t[R]=!0,r="disconnected",i=1):(t[R]=!1,t[P]=!0,r="connected",i=1,zt&&ct.call(Pt,t)<0&&Pt.push(t)),i&&(e=t[n+F]||t[r+F])&&e.call(t))}function p(){}function m(t,n,e){var r=e&&e[U]||"",i=n.prototype,o=_t(i),u=n.observedAttributes||dt,a={prototype:o};Vt(o,G,{value:function(){if(Mt)Mt=!1;else if(!this[wt]){this[wt]=!0,new n(this),i[G]&&i[G].call(this);var t=Lt[Ht.get(n)];(!Tt||t.create.length>1)&&w(this)}}}),Vt(o,q,{value:function(t){-1<ct.call(u,t)&&i[q].apply(this,arguments)}}),i[j]&&Vt(o,B,{value:i[j]}),i[Q]&&Vt(o,Y,{value:i[Q]}),r&&(a[U]=r),t=t.toUpperCase(),Lt[t]={constructor:n,create:r?[r,Ot(t)]:[t]},Ht.set(n,t),k[I](t.toLowerCase(),a),x(t),At[t].r()}function y(t){var n=Lt[t.toUpperCase()];return n&&n.constructor}function b(t){return"string"==typeof t?t:t&&t.is||""}function w(t){for(var n,e=t[q],r=e?t.attributes:dt,i=r.length;i--;)n=r[i],e.call(t,n.name||n.nodeName,null,n.value||n.nodeValue)}function x(t){return t=t.toUpperCase(),t in At||(At[t]={},At[t].p=new Et(function(n){At[t].r=n})),At[t].p}function T(){xt&&delete t.customElements,st(t,"customElements",{configurable:!0,value:new p}),st(t,"CustomElementRegistry",{configurable:!0,value:p});for(var n=E.get(/^HTML[A-Z]*[a-z]/),e=n.length;e--;function(n){var e=t[n];if(e){t[n]=function(t){var n,r;return t||(t=this),t[wt]||(Mt=!0,n=Lt[Ht.get(t.constructor)],r=Tt&&1===n.create.length,t=r?Reflect.construct(e,dt,n.constructor):k.createElement.apply(k,n.create),t[wt]=!0,Mt=!1,r||w(t)),t},t[n].prototype=e.prototype;try{e.prototype.constructor=t[n]}catch(r){bt=!0,st(e,wt,{value:t[n]})}}}(n[e]));k.createElement=function(t,n){var e=b(n);return e?Yt.call(this,t,Ot(e)):Yt.call(this,t)},Kt||(Jt=!0,k[I](""))}var k=t.document,S=t.Object,E=function(t){var n,e,r,i,o=/^[A-Z]+[a-z]/,u=function(t){var n,e=[];for(n in c)t.test(n)&&e.push(n);return e},a=function(t,n){(n=n.toLowerCase())in c||(c[t]=(c[t]||[]).concat(n),c[n]=c[n.toUpperCase()]=t)},c=(S.create||S)(null),l={};for(e in t)for(i in t[e])for(r=t[e][i],c[i]=r,n=0;n<r.length;n++)c[r[n].toLowerCase()]=c[r[n].toUpperCase()]=i;return l.get=function(t){return"string"==typeof t?c[t]||(o.test(t)?[]:""):u(t)},l.set=function(t,n){return o.test(t)?a(t,n):a(n,t),l},l}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=(void 0===n?"undefined":z(n))&&(n={type:n||"auto"});var M,L,A,H,O,_,C,D,I="registerElement",V="__"+I+(1e5*t.Math.random()>>0),N="addEventListener",P="attached",F="Callback",R="detached",U="extends",q="attributeChanged"+F,B=P+F,j="connected"+F,Q="disconnected"+F,G="created"+F,Y=R+F,X="ADDITION",W="MODIFICATION",Z="REMOVAL",K="DOMAttrModified",$="DOMContentLoaded",J="DOMSubtreeModified",tt="<",nt="=",et=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,rt=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],it=[],ot=[],ut="",at=k.documentElement,ct=it.indexOf||function(t){for(var n=this.length;n--&&this[n]!==t;);return n},lt=S.prototype,ft=lt.hasOwnProperty,ht=lt.isPrototypeOf,st=S.defineProperty,dt=[],gt=S.getOwnPropertyDescriptor,vt=S.getOwnPropertyNames,pt=S.getPrototypeOf,mt=S.setPrototypeOf,yt=!!S.__proto__,bt=!1,wt="__dreCEv1",xt=t.customElements,Tt=!/^force/.test(n.type)&&!!(xt&&xt.define&&xt.get&&xt.whenDefined),kt=S.create||S,St=t.Map||function(){var t,n=[],e=[];return{get:function(t){return e[ct.call(n,t)]},set:function(r,i){t=ct.call(n,r),t<0?e[n.push(r)-1]=i:e[t]=i}}},Et=t.Promise||function(t){function n(t){for(r=!0;e.length;)e.shift()(t)}var e=[],r=!1,i={catch:function(){return i},then:function(t){return e.push(t),r&&setTimeout(n,1),i}};return t(n),i},Mt=!1,Lt=kt(null),At=kt(null),Ht=new St,Ot=function(t){return t.toLowerCase()},_t=S.create||function t(n){return n?(t.prototype=n,new t):this},Ct=mt||(yt?function(t,n){return t.__proto__=n,t}:vt&&gt?function(){function t(t,n){for(var e,r=vt(n),i=0,o=r.length;i<o;i++)e=r[i],ft.call(t,e)||st(t,e,gt(n,e))}return function(n,e){do{t(n,e)}while((e=pt(e))&&!ht.call(e,n));return n}}():function(t,n){for(var e in n)t[e]=n[e];return t}),Dt=t.MutationObserver||t.WebKitMutationObserver,It=(t.HTMLElement||t.Element||t.Node).prototype,zt=!ht.call(It,at),Vt=zt?function(t,n,e){return t[n]=e.value,t}:st,Nt=zt?function(t){return 1===t.nodeType}:function(t){return ht.call(It,t)},Pt=zt&&[],Ft=It.attachShadow,Rt=It.cloneNode,Ut=It.dispatchEvent,qt=It.getAttribute,Bt=It.hasAttribute,jt=It.removeAttribute,Qt=It.setAttribute,Gt=k.createElement,Yt=Gt,Xt=Dt&&{attributes:!0,characterData:!0,attributeOldValue:!0},Wt=Dt||function(t){tn=!1,at.removeEventListener(K,Wt)},Zt=0,Kt=I in k&&!/^force-all/.test(n.type),$t=!0,Jt=!1,tn=!0,nn=!0,en=!0;if(Kt||(mt||yt?(C=function(t,n){ht.call(n,t)||s(t,n)},D=s):(C=function(t,n){t[V]||(t[V]=S(!0),s(t,n))},D=C),zt?(tn=!1,function(){var t=gt(It,N),n=t.value,e=function(t){var n=new CustomEvent(K,{bubbles:!0});n.attrName=t,n.prevValue=qt.call(this,t),n.newValue=null,n[Z]=n.attrChange=2,jt.call(this,t),Ut.call(this,n)},r=function(t,n){var e=Bt.call(this,t),r=e&&qt.call(this,t),i=new CustomEvent(K,{bubbles:!0});Qt.call(this,t,n),i.attrName=t,i.prevValue=e?r:null,i.newValue=n,e?i[W]=i.attrChange=1:i[X]=i.attrChange=0,Ut.call(this,i)},i=function(t){var n,e=t.currentTarget,r=e[V],i=t.propertyName;r.hasOwnProperty(i)&&(r=r[i],n=new CustomEvent(K,{bubbles:!0}),n.attrName=r.name,n.prevValue=r.value||null,n.newValue=r.value=e[i]||null,null==n.prevValue?n[X]=n.attrChange=0:n[W]=n.attrChange=1,Ut.call(e,n))};t.value=function(t,o,u){t===K&&this[q]&&this.setAttribute!==r&&(this[V]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=e,n.call(this,"propertychange",i)),n.call(this,t,o,u)},st(It,N,t)}()):Dt||(at[N](K,Wt),at.setAttribute(V,1),at.removeAttribute(V),tn&&(L=function(t){var n,e,r,i=this;if(i===t.target){n=i[V],i[V]=e=H(i);for(r in e){if(!(r in n))return A(0,i,r,n[r],e[r],X);if(e[r]!==n[r])return A(1,i,r,n[r],e[r],W)}for(r in n)if(!(r in e))return A(2,i,r,n[r],e[r],Z)}},A=function(t,n,e,r,i,o){var u={attrChange:t,currentTarget:n,attrName:e,prevValue:r,newValue:i};u[o]=t,c(u)},H=function(t){for(var n,e,r={},i=t.attributes,o=0,u=i.length;o<u;o++)n=i[o],"setAttribute"!==(e=n.name)&&(r[e]=n.value);return r})),k[I]=function(t,n){if(e=t.toUpperCase(),$t&&($t=!1,Dt?(O=function(t,n){function e(t,n){for(var e=0,r=t.length;e<r;n(t[e++]));}return new Dt(function(r){for(var i,o,u,a=0,c=r.length;a<c;a++)i=r[a],"childList"===i.type?(e(i.addedNodes,t),e(i.removedNodes,n)):(o=i.target,en&&o[q]&&"style"!==i.attributeName&&(u=qt.call(o,i.attributeName))!==i.oldValue&&o[q](i.attributeName,i.oldValue,u))})}(o(P),o(R)),_=function(t){return O.observe(t,{childList:!0,subtree:!0}),t},_(k),Ft&&(It.attachShadow=function(){return _(Ft.apply(this,arguments))})):(M=[],k[N]("DOMNodeInserted",l(P)),k[N]("DOMNodeRemoved",l(R))),k[N]($,f),k[N]("readystatechange",f),It.cloneNode=function(t){var n=Rt.call(this,!!t),e=u(n);return-1<e&&D(n,ot[e]),t&&ut.length&&i(n.querySelectorAll(ut)),n}),Jt)return Jt=!1;if(-2<ct.call(it,nt+e)+ct.call(it,tt+e)&&g(t),!et.test(e)||-1<ct.call(rt,e))throw new Error("The type "+t+" is invalid");var e,a,c=function(){return s?k.createElement(d,e):k.createElement(d)},h=n||lt,s=ft.call(h,U),d=s?n[U].toUpperCase():e;return s&&-1<ct.call(it,tt+d)&&g(d),a=it.push((s?nt:tt)+e)-1,ut=ut.concat(ut.length?",":"",s?d+'[is="'+t.toLowerCase()+'"]':d),c.prototype=ot[a]=ft.call(h,"prototype")?h.prototype:_t(It),ut.length&&r(k.querySelectorAll(ut),P),c},k.createElement=Yt=function(t,n){var e=b(n),r=e?Gt.call(k,t,Ot(e)):Gt.call(k,t),i=""+t,o=ct.call(it,(e?nt:tt)+(e||i).toUpperCase()),u=-1<o;return e&&(r.setAttribute("is",e=e.toLowerCase()),u&&(u=a(i.toUpperCase(),e))),en=!k.createElement.innerHTMLHelper,u&&D(r,ot[o]),r}),p.prototype={constructor:p,define:Tt?function(t,n,e){if(e)m(t,n,e);else{var r=t.toUpperCase();Lt[r]={constructor:n,create:[r]},Ht.set(n,r),xt.define(t,n)}}:m,get:Tt?function(t){return xt.get(t)||y(t)}:y,whenDefined:Tt?function(t){return Et.race([xt.whenDefined(t),x(t)])}:x},!xt||/^force/.test(n.type))T();else if(!n.noBuiltIn)try{!function(n,e,r){if(e[U]="a",n.prototype=_t(HTMLAnchorElement.prototype),n.prototype.constructor=n,t.customElements.define(r,n,e),qt.call(k.createElement("a",{is:r}),"is")!==r||Tt&&qt.call(new n,"is")!==r)throw e}(function t(){return Reflect.construct(HTMLAnchorElement,[],t)},{},"document-register-element-a")}catch(t){T()}if(!n.noBuiltIn)try{Gt.call(k,"a","a")}catch(t){Ot=function(t){return{is:t.toLowerCase()}}}}(window);var zn="__d3fc-elements__",Vn=function(t){return t[zn]||{}},Nn=function(t,n){return void(t[zn]=n)},Pn=function(t){return delete t[zn]},Fn=function(t){return"D3FC-GROUP"===t.tagName?[t].concat(U(t.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg"))):[t]},Rn=function(t){if("D3FC-GROUP"!==t.tagName){var n=Vn(t),e=n.width,r=n.height,i=t.clientWidth,o=t.clientHeight;Nn(t,{width:i,height:o,resized:i!==e||o!==r})}},Un=function(t){if("D3FC-GROUP"!==t.tagName){var n=Vn(t),e=t.childNodes[0];e.setAttribute("width",n.width),e.setAttribute("height",n.height);var r=new CustomEvent("measure",{detail:n});t.dispatchEvent(r)}},qn=function(t){var n=Vn(t),e=new CustomEvent("draw",{detail:n});t.dispatchEvent(e)},Bn=function(t){var n=t.map(Fn).reduce(function(t,n){return t.concat(n)});n.forEach(Rn),n.forEach(Un),n.forEach(qn)},jn=function(t){return Vn(t.ownerDocument).queue||[]},Qn=function(t,n){var e=Vn(t.ownerDocument),r=e.requestId;null==r&&(r=requestAnimationFrame(function(){var n=jn(t);Bn(n),Gn(t)})),Nn(t.ownerDocument,{queue:n,requestId:r})},Gn=function(t){return Pn(t.ownerDocument)},Yn=function(t,n){var e=t;do{if(e.parentNode===n)return!0}while(e=e.parentNode);return!1},Xn=function(t){var n=jn(t);if(!(n.indexOf(t)>-1)&&!n.some(function(n){return Yn(t,n)})){var e=n.filter(function(n){return!Yn(n,t)});e.push(t),Qn(t,e)}},Wn=function(t,n){t.__node__=n},Zn=function(t){return function(n){function e(n){var r,i;return V(this,e),Wn(n=r=F(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n)),t()),i=n,F(r,i)}return P(e,n),N(e,[{key:"connectedCallback",value:function(){this.appendChild(this.__node__)}},{key:"requestRedraw",value:function(){Xn(this)}}]),e}(HTMLElement)},Kn=Zn(function(){return document.createElement("canvas")}),$n=function(t){function n(t){var e,r;return V(this,n),r=t=e=F(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t)),F(e,r)}return P(n,t),N(n,[{key:"requestRedraw",value:function(){Xn(this)}},{key:"updateAutoResize",value:function(){var t=this;this.autoResize?(null==this.__autoResizeListener__&&(this.__autoResizeListener__=function(){return Xn(t)}),addEventListener("resize",this.__autoResizeListener__)):removeEventListener("resize",this.__autoResizeListener__)}},{key:"attributeChangedCallback",value:function(t){switch(t){case"auto-resize":this.updateAutoResize()}}},{key:"autoResize",get:function(){return this.hasAttribute("auto-resize")&&"false"!==this.getAttribute("auto-resize")},set:function(t){t&&!this.autoResize?this.setAttribute("auto-resize",""):!t&&this.autoResize&&this.removeAttribute("auto-resize"),this.updateAutoResize()}}],[{key:"observedAttributes",get:function(){return["auto-resize"]}}]),n}(HTMLElement),Jn=Zn(function(){return document.createElementNS("http://www.w3.org/2000/svg","svg")}),te="d3fc-canvas,d3fc-svg{position:relative}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;top:0;right:0;left:0;bottom: 0}d3fc-svg>svg{overflow:visible}",ne=document.createElement("style");ne.setAttribute("type","text/css"),document.querySelector("head").appendChild(ne),ne.styleSheet?ne.styleSheet.cssText+=te:ne.textContent+=te,customElements.define("d3fc-canvas",Kn),customElements.define("d3fc-group",$n),customElements.define("d3fc-svg",Jn);var ee=function(){function t(){var t=a.mouse(this);e.call("point",this,[{x:t[0],y:t[1]}])}function n(){e.call("point",this,[])}var e=l.dispatch("point"),r=function(e){e.on("mouseenter.pointer",t).on("mousemove.pointer",t).on("mouseleave.pointer",n)};return T(r,e,"on"),r},re=function(){var t="",n="vertical",e=function(t,n){return Number(t[n])},r=function(n){return Object.keys(n[0]).filter(function(n){return n!==t}).map(function(r){var i=n.filter(function(t){return t[r]}).map(function(n){var i=[n[t],e(n,r)];return i.data=n,i});return i.key=r,i})},i=function(n){return n.map(function(n){var r=Object.keys(n).filter(function(n){return n!==t}).map(function(t){var r=[t,e(n,t)];return r.data=n,r});return r.key=n[t],r})},o=function(t){return"vertical"===n?r(t):i(t)};return o.key=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.value=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.orient=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o},ie=function(t){return function(e){if(e.length<=1)return 10;e.sort();var r=n.pairs(e).map(function(t){return Math.abs(t[0]-t[1])}),i=n.min(r);return t*i}},oe=function(t){return"function"==typeof t?t:function(){return t}},ue=function(){var t=e.scaleIdentity(),n=e.scaleIdentity(),r=function(){return 0},i=function(t){return t.x},o=function(t){return t.y},u=function(){},a=ie(.75),c="vertical",l=function(){};return l.defined=function(t,n){return w(r,i,o)(t,n)},l.values=function(e,u){if("vertical"===c){var a=n(o(e,u)),l=n(r(e,u)),f=t(i(e,u));return{d:e,x:f,y:a,y0:l,height:a-l,origin:[f,a],baseOrigin:[f,l],transposedX:f,transposedY:a}}var h=t(o(e,u)),s=t(r(e,u)),d=n(i(e,u));return{d:e,x:d,y:h,y0:s,height:h-s,origin:[h,d],baseOrigin:[s,d],transposedX:h,transposedY:d}},l.decorate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],l):u},l.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.baseValue=function(){return arguments.length?(r=oe(arguments.length<=0?void 0:arguments[0]),l):r},l.crossValue=function(){return arguments.length?(i=oe(arguments.length<=0?void 0:arguments[0]),l):i},l.mainValue=function(){return arguments.length?(o=oe(arguments.length<=0?void 0:arguments[0]),l):o},l.barWidth=function(){return arguments.length?(a=oe(arguments.length<=0?void 0:arguments[0]),l):a},l.orient=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],l):c},l},ae={red:"#c60",green:"#6c0",black:"#000",gray:"#ddd",darkGray:"#999"},ce=function(){var t=ue(),n=c.line().defined(t.defined).x(function(n,e){return t.values(n,e).transposedX}).y(function(n,e){return t.values(n,e).transposedY}),e=Dt("path","line"),r=function(r){r.selection&&e.transition(r),r.each(function(r,i,o){var u=e(a.select(o[i]),[r]);u.attr("d",n).attr("fill","none").attr("stroke",ae.black),t.decorate()(u,r,i)})};return S(r,t,M("baseValue","barWidth")),T(r,e,"key"),T(r,n,"curve"),r},le=function(t){return"function"==typeof t?t:function(){return t}},fe=function(t,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.scaleIdentity(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.scaleIdentity(),o=le(""),u=le(""),c=le("right"),l=le("bottom"),f=le(""),h=ce(),s=null,d=void 0,g=void 0,v=void 0,p=void 0,m=void 0,y=void 0,b=void 0,w=function(){},x=null,T=void 0,k=void 0,E=void 0,L=void 0,A=void 0,H=void 0,_=void 0,C=function(){},D=function(){},I=function(t){switch(t){case"bottom":return Cn();case"top":return _n();case"left":return Dn();case"right":return In();case"none":return null}},z=function(t){switch(t){case"left":return"margin-left: 4em";case"right":return"margin-right: 4em";default:return""}},V=function(t){switch(t){case"left":return"padding-right: 1em";case"right":return"padding-left: 1em";case"none":return"padding-left: 1em; padding-right: 1em";default:return""}},N=function(t){switch(t){case"bottom":return"flex-direction: column";default:return"flex-direction: column-reverse"}},P=function(t){switch(t){case"right":return"flex-direction: row";default:return"flex-direction: row-reverse"}},F=Dt("d3fc-group","cartesian-chart"),R=function(t){return function(n){return t.selection?n.transition(t):n}},q=function(e){var S=R(e);e.each(function(e,M,O){var R=F(a.select(O[M]),[e]),q=l(e),B=c(e),j=I(q),Q=I(B),G=j?"<d3fc-svg class='x-axis' style='height: 2em; "+z(B)+"'></d3fc-svg>\n                    <div class='x-axis-label' style='height: 1em; line-height: 1em; text-align: center; "+z(B)+"'></div>":"",Y=Q?"<d3fc-svg class='y-axis' style='width: 3em'></d3fc-svg>\n                    <div style='width: 1em; display: flex; align-items: center; justify-content: center'>\n                        <div class='y-axis-label' style='transform: rotate(-90deg)'></div>\n                    </div>":"";R.enter().attr("style","display: flex; height: 100%; width: 100%; flex-direction: column; overflow: hidden").attr("auto-resize","").html("<div class='chart-label'\n                                style='height: "+(f?2:0)+"em; line-height: 2em; text-align: center; "+z(B)+"'>\n                          </div>\n                          <div style='flex: 1; display: flex; "+N(q)+"; "+V(B)+"'>\n                              <div style='flex: 1; display: flex; "+P(B)+"'>\n                                  <"+t+" class='plot-area' style='flex: 1'></"+t+">\n                                  "+Y+"\n                              </div>\n                              "+G+"\n                          </div>"),R.select(".y-axis-label").text(o(e)),R.select(".x-axis-label").text(u(e)),R.select(".chart-label").text(f(e)),R.select(".y-axis").on("measure",function(t,n,e){if("left"===B){var r=a.event.detail,i=r.width,o=r.height;a.select(e[n]).select("svg").attr("viewBox",-i+" 0 "+i+" "+o)}}).on("draw",function(t,n,e){Q.tickFormat(x).decorate(C),T&&Q.ticks.apply(Q,U(T)),k&&Q.tickArguments(k),E&&Q.tickSize(E),L&&Q.tickSizeInner(L),A&&Q.tickSizeOuter(A),H&&Q.tickValues(H),_&&Q.tickPadding(_),S(a.select(e[n])).select("svg").call(Q.scale(i))}),R.select(".x-axis").on("measure",function(t,n,e){if("top"===q){var r=a.event.detail,i=r.width,o=r.height;a.select(e[n]).select("svg").attr("viewBox","0 "+-o+" "+i+" "+o)}}).on("draw",function(t,n,e){j.tickFormat(s).decorate(w),d&&j.ticks.apply(j,U(d)),g&&j.tickArguments(g),v&&j.tickSize(v),p&&j.tickSizeInner(p),m&&j.tickSizeOuter(m),y&&j.tickValues(y),b&&j.tickPadding(b),S(a.select(e[n])).select("svg").call(j.scale(r))}),R.select(".plot-area").on("measure",function(){var t=a.event.detail,n=t.width,e=t.height;r.range([0,n]),i.range([e,0])}).on("draw",function(t,e,o){h.xScale(r).yScale(i),n(t,o[e],h,S)}),R.each(function(t,n,e){return e[n].requestRedraw()}),D(R,e,M)})},B=M(/range\w*/,/tickFormat/);return S(q,r,B,O("x")),S(q,i,B,O("y")),q.xTickFormat=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],q):s},q.xTicks=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.length?(d=n,q):d},q.xTickArguments=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],q):g},q.xTickSize=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],q):v},q.xTickSizeInner=function(){return arguments.length?(p=arguments.length<=0?void 0:arguments[0],q):p},q.xTickSizeOuter=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],q):m},q.xTickValues=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],q):y},q.xTickPadding=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],q):b},q.xDecorate=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],q):w},q.yTickFormat=function(){return arguments.length?(x=arguments.length<=0?void 0:arguments[0],q):x},q.yTicks=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.length?(T=n,q):T},q.yTickArguments=function(){return arguments.length?(k=arguments.length<=0?void 0:arguments[0],q):k},q.yTickSize=function(){return arguments.length?(E=arguments.length<=0?void 0:arguments[0],q):E},q.yTickSizeInner=function(){return arguments.length?(L=arguments.length<=0?void 0:arguments[0],q):L},q.yTickSizeOuter=function(){return arguments.length?(A=arguments.length<=0?void 0:arguments[0],q):A},q.yTickValues=function(){return arguments.length?(H=arguments.length<=0?void 0:arguments[0],q):H},q.yTickPadding=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],q):_},q.yDecorate=function(){return arguments.length?(C=arguments.length<=0?void 0:arguments[0],q):C},q.yOrient=function(){return arguments.length?(c=le(arguments.length<=0?void 0:arguments[0]),q):c},q.xOrient=function(){return arguments.length?(l=le(arguments.length<=0?void 0:arguments[0]),q):l},q.chartLabel=function(){return arguments.length?(f=le(arguments.length<=0?void 0:arguments[0]),q):f},q.plotArea=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],q):h},q.xLabel=function(){return arguments.length?(u=le(arguments.length<=0?void 0:arguments[0]),q):u},q.yLabel=function(){return arguments.length?(o=le(arguments.length<=0?void 0:arguments[0]),q):o},q.decorate=function(){return arguments.length?(D=arguments.length<=0?void 0:arguments[0],q):D},q}},he=fe("d3fc-svg",function(t,n,e,r){r(a.select(n)).select("svg").call(e)}),se=function(){return he.apply(void 0,arguments)},de=fe("d3fc-canvas",function(t,n,e){var r=n.childNodes[0];e.context(r.getContext("2d")),e(t)}),ge=function(){return de.apply(void 0,arguments)},ve=function(t){switch(t){case"x":return f.brushX();case"y":return f.brushY();case"xy":return f.brush()}},pe=function(t){return[t[1],t[0]]},me=function(t){var n=ve(t),r=l.dispatch("brush","start","end"),i=e.scaleIdentity(),o=e.scaleIdentity(),u=Dt("g","brush"),c=function(n,e,r){switch(t){case"x":return n.map(e);case"y":return n.map(r);case"xy":return[[e(n[0][0]),r(n[0][1])],[e(n[1][0]),r(n[1][1])]]}},f=function(t){return c(t,e.scaleLinear().domain(i.range()).invert,e.scaleLinear().domain(pe(o.range())).invert)},h=function(t){return c(t,e.scaleLinear().domain(i.range()),e.scaleLinear().domain(pe(o.range())))},s=function(n){var r=e.scaleLinear().domain(i.domain());return"x"===t?n.map(r.invert):"xy"===t?[r.invert(n[0][0]),r.invert(n[1][0])]:void 0},d=function(n){var r=e.scaleLinear().domain(pe(o.domain()));return"y"===t?[n[1],n[0]].map(r.invert):"xy"===t?[r.invert(n[1][1]),r.invert(n[0][1])]:void 0},g=function(t){if(!t.sourceEvent||"draw"!==t.sourceEvent.type)if(t.selection){var n=h(t.selection);r.call(t.type,{},{selection:n,xDomain:s(n),yDomain:d(n)})}else r.call(t.type,{},{})},v=function(t){t.each(function(t,e,r){n.extent([[i.range()[0],o.range()[1]],[i.range()[1],o.range()[0]]]),n.on("end",function(){return g(a.event)}).on("brush",function(){return g(a.event)}).on("start",function(){return g(a.event)}),u(a.select(r[e]),[t]).call(n).call(n.move,t?f(t):null)})};return v.xScale=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],v):i},v.yScale=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],v):o},T(v,r,"on"),T(v,n,"filter","handleSize"),v},ye=function(){return me("x")},be=function(){return me("y")},we=function(){return me("xy")};t.indicatorBollingerBands=C,t.indicatorExponentialMovingAverage=D,t.indicatorMacd=I,t.indicatorRelativeStrengthIndex=q,t.indicatorStochasticOscillator=j,t.indicatorForceIndex=Q,t.indicatorEnvelope=G,t.indicatorElderRay=Y,t.indicatorMovingAverage=B,t.scaleDiscontinuous=p,t.discontinuitySkipWeekends=W,t.discontinuityIdentity=X,t.discontinuityRange=Z,t.extentLinear=K,t.extentDate=$,t.randomFinancial=tt,t.randomGeometricBrownianMotion=J,t.randomSkipWeekends=nt,t.feedGdax=et,t.feedQuandl=rt,t.bucket=it,t.largestTriangleOneBucket=ot,t.largestTriangleThreeBucket=ut,t.modeMedian=at,t.rebind=T,t.rebindAll=S,t.exclude=M,t.include=L,t.includeMap=A,t.prefix=O,t.shapeOhlc=lt,t.shapeBar=ft,t.shapeCandlestick=ht,t.shapeBoxPlot=st,t.shapeErrorBar=dt,t.layoutLabel=pt,t.layoutTextLabel=mt,t.layoutGreedy=Mt,t.layoutAnnealing=Ht,t.layoutRemoveOverlaps=_t,t.layoutBoundingBox=Ct,t.dataJoin=Dt,t.effectivelyZero=1e-6,t.seriesSvgLine=Pt,t.seriesCanvasLine=Ft,t.seriesSvgPoint=Rt,t.seriesCanvasPoint=Ut,t.seriesSvgBar=qt,t.seriesCanvasBar=Bt,t.seriesSvgErrorBar=Qt,t.seriesCanvasErrorBar=Gt,t.seriesSvgArea=Yt,t.seriesCanvasArea=Xt,t.seriesSvgCandlestick=Kt,t.seriesCanvasCandlestick=Jt,t.seriesSvgBoxPlot=nn,t.seriesCanvasBoxPlot=en,t.seriesSvgOhlc=rn,t.seriesCanvasOhlc=on,t.seriesSvgMulti=an,t.seriesCanvasMulti=cn,t.seriesSvgGrouped=fn,t.seriesCanvasGrouped=hn,t.seriesSvgRepeat=sn,t.seriesCanvasRepeat=dn,t.autoBandwidth=gn,t.annotationSvgBand=pn,
t.annotationSvgCrosshair=En,t.annotationSvgLine=mn,t.annotationSvgGridline=An,t.axisTop=_n,t.axisBottom=Cn,t.axisLeft=Dn,t.axisRight=In,t.pointer=ee,t.group=re,t.chartSvgCartesian=se,t.chartCanvasCartesian=ge,t.brushX=ye,t.brushY=be,t.brush=we,Object.defineProperty(t,"__esModule",{value:!0})});